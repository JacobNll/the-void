namespace SpriteKind {
    export const NPC = SpriteKind.create()
}
/**
 * Events
 */
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile4`, function (sprite, location) {
    if (setreal_round == 1) {
        setcustomgameover = true
        setroundcontroller = 200
    }
    if (setreal_round == 2) {
        setroundcontroller = 300
    }
})
// Cutscene trigger
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile3`, function (sprite, location) {
    // Cutscene Level-1
    if (setreal_round == 1) {
        if (setcutscenecontroller == true) {
            setcutscenecontroller = false
            story.startCutscene(function () {
                story.setSoundEnabled(true)
                tiles.setCurrentTilemap(tilemap`tile_level1-cutscene_over`)
                scene.cameraFollowSprite(sprNPCWalter)
                controller.moveSprite(sprPlayer, 0, 0)
                story.printDialog("Hello traveller.", 80, 90, 20, 150, 15, 1, story.TextSpeed.Normal)
                story.printDialog("Welcome to the Void", 80, 90, 20, 150, 15, 1, story.TextSpeed.Normal)
                story.printDialog("Im Walter", 80, 90, 20, 150, 15, 1, story.TextSpeed.Normal)
                story.printDialog("This is the Void", 80, 90, 20, 150, 15, 1, story.TextSpeed.Normal)
                story.printDialog("This is a calm dimension", 80, 90, 20, 150, 15, 1, story.TextSpeed.Normal)
                story.printDialog("Continue your journey by activating the portals", 80, 90, 20, 150, 15, 1, story.TextSpeed.Normal)
                scene.cameraFollowSprite(sprPlayer)
                controller.moveSprite(sprPlayer, 40, 40)
                sprNPCWalter.destroy(effects.coolRadial, 100)
                story.clearAllText()
            })
        }
    }
})
let sprPlayer: Sprite = null
let sprNPCWalter: Sprite = null
let setcutscenecontroller = false
let setcustomgameover = false
let setreal_round = 0
let setroundcontroller = 0
setroundcontroller = 0
forever(function () {
    if (setroundcontroller == 0) {
        scene.setBackgroundColor(0)
        setroundcontroller = 999
        story.showPlayerChoices("New Game", "Level selection", "Quit", "?")
        if (story.checkLastAnswer("New Game")) {
            setroundcontroller = 100
            setreal_round = 0
        }
        if (story.checkLastAnswer("Level selection")) {
            if (setreal_round == 0) {
                game.showLongText("No Games loaded ", DialogLayout.Full)
                game.reset()
            }
            if (setreal_round == 1) {
                story.showPlayerChoices("Level-1", "Quit")
                if (story.checkLastAnswer("Quit")) {
                    game.over(false)
                }
                if (story.checkLastAnswer("Level-1")) {
                    setroundcontroller = 100
                }
            }
        }
        if (story.checkLastAnswer("Quit")) {
            game.over(false, effects.dissolve)
        }
        if (story.checkLastAnswer("?")) {
            tiles.setCurrentTilemap(tilemap`level4`)
            scene.setBackgroundColor(1)
            scene.setBackgroundImage(img`
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ...............................................................fffff............................................................................................
                ...........................................fffff...............fffff............................................................................................
                ...........................................fffff...............fffff............................................................................................
                ...........................................fffff...............fffff............................................................................................
                ...........................................fffff...............fffff............................................................................................
                ...........................................fffff................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................fffff....................................................................................................
                .......................................................ffffff...................................................................................................
                .......................................................ffffff...................................................................................................
                .......................................................ffffff...................................................................................................
                .......................................................ffffffff.................................................................................................
                ........................................................fffffffffffff...........................................................................................
                ........................................................ffffffffffffff..........................................................................................
                ........................................................ffffffffffffff..........................................................................................
                .........................................................ffffffffffffff.........................................................................................
                ...........................................................fffffffffffff........................................................................................
                .................................................................fffffff........................................................................................
                .................................................................fffffff........................................................................................
                ..................................................................ffffff........................................................................................
                ...................................................................ffffff.......................................................................................
                ...................................................................ffffff.......................................................................................
                ...................................................................ffffff.......................................................................................
                ...................................................................ffffff.......................................................................................
                ...................................................................ffffff.......................................................................................
                ...................................................................ffffff.......................................................................................
                ...................................................................ffffff.......................................................................................
                ..................................................................fffffff.......................................................................................
                ..................................................................ffffff........................................................................................
                .......................................................fffff.....fffffff........................................................................................
                .......................................................fffffffffffffffff........................................................................................
                .......................................................ffffffffffffffff.........................................................................................
                .......................................................ffffffffffffffff.........................................................................................
                .......................................................fffffffffffffff..........................................................................................
                ........................................................fffffffffffff...........................................................................................
                ...........................................................ffffffff.............................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ............................................fffff...............................................................................................................
                ............................................fffff.............fffff.............................................................................................
                ............................................fffff.............fffff.............................................................................................
                ............................................ffffff............fffff.............................................................................................
                ............................................fffffff...........fffff.............................................................................................
                ............................................fffffffff.........fffff.............................................................................................
                ............................................fffffffffff......ffffff.............................................................................................
                .............................................ffffffffffffffffffffff.............................................................................................
                ..............................................fffffffffffffffffffff.............................................................................................
                ...............................................ffffffffffffffffffff.............................................................................................
                .................................................fffffffffffffffff..............................................................................................
                ...................................................ffffffffffffff...............................................................................................
                .......................................................fffffff..................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                `)
        }
    }
})
forever(function () {
    if (setroundcontroller == 100) {
        setroundcontroller = 1
        setreal_round = 1
        scene.setBackgroundColor(1)
        tiles.setCurrentTilemap(tilemap`level1`)
        sprPlayer = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . f f f . . . . . 
            . . . f . . . f 1 f 1 f . . . . 
            . . . f f . . f f f f f . . . . 
            . . . f f f f f f f f f . . . . 
            . . . . f f f f f f f . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Player)
        sprNPCWalter = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f 1 f 1 f . . . . . . 
            . . . . f f f f f f f . . . . . 
            . . . f f f f f f f f f . . . . 
            . . . f f f f f f f f f . . . . 
            . . . f f f f f f f f f . . . . 
            . . . f f f f f f f f f . . . . 
            . . . . f f f f f f f . . . . . 
            . . . . f f f f f f f . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.NPC)
        tiles.placeOnTile(sprPlayer, tiles.getTileLocation(1, 8))
        tiles.placeOnTile(sprNPCWalter, tiles.getTileLocation(10, 8))
        scene.cameraFollowSprite(sprPlayer)
        controller.moveSprite(sprPlayer, 30, 30)
        setcutscenecontroller = true
    }
})
forever(function () {
    if (setcustomgameover == true) {
        setcustomgameover = false
        story.clearAllText()
        story.cancelAllCutscenes()
        tiles.setCurrentTilemap(tilemap`tile_empty`)
        sprites.destroyAllSpritesOfKind(SpriteKind.Player)
        sprites.destroyAllSpritesOfKind(SpriteKind.Enemy)
        sprites.destroyAllSpritesOfKind(SpriteKind.NPC)
        game.showLongText("Game over", DialogLayout.Full)
        setroundcontroller = 0
    }
})
